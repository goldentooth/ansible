{
  "service": {
    "name": "dllama-worker",
    "id": "dllama-worker-{{ inventory_hostname }}",
    "tags": [
      "distributed-llama",
      "worker",
      "llm",
      "{{ ansible_architecture }}",
      "node-{{ inventory_hostname }}"
    ],
    "address": "{{ ipv4_address }}",
    "port": {{ distributed_llama.worker_port }},
    "meta": {
      "version": "{{ distributed_llama.version }}",
      "node": "{{ inventory_hostname }}",
      "threads": "{{ distributed_llama.threads }}",
      "architecture": "{{ ansible_architecture }}",
      "role": "worker"
    },
    "checks": [
      {
        "name": "Distributed LLaMA Worker Service",
        "service_id": "dllama-worker-{{ inventory_hostname }}",
        "script": "systemctl is-active dllama-worker",
        "interval": "30s",
        "timeout": "10s"
      },
      {
        "name": "Distributed LLaMA Worker Port",
        "service_id": "dllama-worker-{{ inventory_hostname }}",
        "tcp": "{{ ipv4_address }}:{{ distributed_llama.worker_port }}",
        "interval": "60s",
        "timeout": "10s"
      }
    ]
  }
}