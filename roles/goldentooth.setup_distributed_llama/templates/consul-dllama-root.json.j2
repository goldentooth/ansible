{
  "service": {
    "name": "dllama-root", 
    "id": "dllama-root-{{ inventory_hostname }}",
    "tags": [
      "distributed-llama",
      "root",
      "coordinator", 
      "llm",
      "{{ ansible_architecture }}",
      "node-{{ inventory_hostname }}"
    ],
    "address": "{{ ipv4_address }}",
    "port": 0,
    "meta": {
      "version": "{{ distributed_llama.version }}",
      "node": "{{ inventory_hostname }}",
      "threads": "{{ distributed_llama.threads }}",
      "architecture": "{{ ansible_architecture }}",
      "role": "root",
      "models_dir": "{{ distributed_llama.models_dir }}",
      "buffer_float_type": "{{ distributed_llama.buffer_float_type }}",
      "max_seq_len": "{{ distributed_llama.max_seq_len }}",
      "worker_count": "{{ distributed_llama.worker_nodes | length }}"
    },
    "checks": [
      {
        "name": "Distributed LLaMA Root Directory",
        "service_id": "dllama-root-{{ inventory_hostname }}",
        "script": "test -d {{ distributed_llama.install_dir }}",
        "interval": "60s",
        "timeout": "5s"
      },
      {
        "name": "Distributed LLaMA Models Directory",
        "service_id": "dllama-root-{{ inventory_hostname }}",
        "script": "test -d {{ distributed_llama.models_dir }}",
        "interval": "120s", 
        "timeout": "5s"
      }
    ]
  }
}