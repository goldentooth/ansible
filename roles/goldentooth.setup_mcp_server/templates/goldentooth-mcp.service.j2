[Unit]
Description=Goldentooth MCP Server
Documentation=https://github.com/{{ mcp_server_github_repo }}
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
User={{ mcp_server_user }}
Group={{ mcp_server_group }}
ExecStart={{ mcp_server_install_dir }}/{{ mcp_server_binary_name }} --http
Environment=MCP_HTTP_MODE=1
Environment=MCP_PORT={{ mcp_server_port | default('8080') }}
Restart={{ mcp_server_restart_policy }}
RestartSec={{ mcp_server_restart_delay }}
StandardInput=null
StandardOutput=journal
StandardError=journal
SyslogIdentifier={{ mcp_server_service_name }}
WorkingDirectory={{ mcp_server_working_dir }}

# Security hardening
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths={{ mcp_server_working_dir }}

# Resource limits
MemoryLimit={{ mcp_server_memory_limit }}
CPUQuota={{ mcp_server_cpu_quota }}

[Install]
WantedBy=multi-user.target