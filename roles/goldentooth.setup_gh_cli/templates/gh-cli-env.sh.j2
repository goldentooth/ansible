# GitHub CLI Environment Configuration
# Generated by Ansible goldentooth.setup_gh_cli role
# Source: goldentooth cluster node {{ inventory_hostname }}

# Ensure /usr/local/bin is in PATH for GitHub CLI
if [[ ":$PATH:" != *":/usr/local/bin:"* ]]; then
    export PATH="/usr/local/bin:$PATH"
fi

# GitHub CLI environment variables
export GH_PAGER="${GH_PAGER:-less}"
export GH_EDITOR="${GH_EDITOR:-${EDITOR:-nano}}"

# GitHub CLI helpful aliases
alias ghpr='gh pr'
alias ghissue='gh issue'  
alias ghrepo='gh repo'
alias ghstatus='gh status'
alias ghauth='gh auth status'

# GitHub CLI completion (if available)
if command -v gh &> /dev/null; then
    # Enable GitHub CLI shell completion
    if [ -n "$BASH_VERSION" ]; then
        eval "$(gh completion -s bash 2>/dev/null || true)"
    elif [ -n "$ZSH_VERSION" ]; then
        eval "$(gh completion -s zsh 2>/dev/null || true)"
    fi
fi

# Helper function for GitHub CLI usage
gh_help() {
    echo "GitHub CLI available on cluster node {{ inventory_hostname }}"
    echo ""
    echo "Authentication (run once per user):"
    echo "  gh auth login              - Authenticate with GitHub"
    echo "  gh auth setup-git          - Configure Git to use GitHub CLI"
    echo "  gh auth status             - Check authentication status"
    echo ""
    echo "Common commands:"
    echo "  gh repo list               - List your repositories"
    echo "  gh repo clone user/repo    - Clone a repository"
    echo "  gh repo create name        - Create a new repository"
    echo ""
    echo "Pull requests:"
    echo "  gh pr list                 - List pull requests"
    echo "  gh pr create               - Create a pull request"
    echo "  gh pr checkout NUMBER      - Checkout a pull request"
    echo ""
    echo "Issues:"
    echo "  gh issue list              - List issues"
    echo "  gh issue create            - Create an issue"
    echo "  gh issue view NUMBER       - View an issue"
    echo ""
    echo "Shortcuts:"
    echo "  ghpr                       - Alias for 'gh pr'"
    echo "  ghissue                    - Alias for 'gh issue'"
    echo "  ghrepo                     - Alias for 'gh repo'"
    echo "  ghstatus                   - Show repository status"
    echo "  ghauth                     - Check auth status"
    echo ""
    echo "Documentation: gh help"
}

# Export the helper function
export -f gh_help