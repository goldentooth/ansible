# Prometheus service discovery targets for Slurm exporter
# Generated by goldentooth.setup_slurm_exporter role
# Auto-updated when role is re-run

{% for slurm_controller in groups['slurm_controller'] %}
- targets:
  - "{{ hostvars[slurm_controller].ansible_default_ipv4.address }}:{{ prometheus_slurm_exporter.port }}"
  labels:
    job: 'slurm'
    instance: '{{ slurm_controller }}'
    __scheme__: 'http'
    __metrics_path__: '/metrics'
    cluster: '{{ cluster_name }}'
    role: 'slurm-controller'
    node_type: 'slurm-exporter'
{% endfor %}