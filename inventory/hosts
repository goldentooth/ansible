localhost:
all:
  children:

    # -----------------------------------
    # All Nodes
    # -----------------------------------
    all_nodes:
      children:
        all_pis:
          children:
            all_pi_4b:
              children:
                all_pi_4b_8gb:
                  hosts:
                    allyrion:
                    bettley:
                    cargyll:
                    dalt:
                    erenford:
                    fenn:
                    gardener:
                    harlton:
                    inchfield:
                    jast:
                all_pi_4b_4gb:
                  hosts:
                    karstark:
                    lipps:
            all_pi_5:
              hosts:
                manderly:
                norcross:
                oakheart:
                payne:
        all_non_pis:
          hosts:
            velaryon:

    # -----------------------------------
    # Kubernetes
    # -----------------------------------
    k8s_cluster:
      children:
        k8s_control_plane:
          hosts:
            bettley:
            cargyll:
            dalt:
        k8s_worker:
          children:
            k8s_worker_gpu:
              hosts:
                velaryon:
          hosts:
            erenford:
            fenn:
            gardener:
            harlton:
            inchfield:
            jast:
            karstark:
            lipps:
            manderly:
            norcross:
            oakheart:
            payne:

    # -----------------------------------
    # Slurm
    # -----------------------------------
    slurm:
      children:
        slurm_controller:
          hosts:
            bettley:
            cargyll:
            dalt:
        slurm_compute:
          hosts:
            bettley:
            cargyll:
            dalt:
            erenford:
            fenn:
            gardener:
            harlton:
            inchfield:
            jast:
            karstark:
            lipps:
            manderly:
            norcross:
            oakheart:
            payne:

    # -----------------------------------
    # Ray
    # -----------------------------------
    ray:
      children:
        ray_head:
          hosts:
            erenford:
        ray_worker:
          children:
            ray_worker_gpu:
              hosts:
                velaryon:
          hosts:
            allyrion:
            bettley:
            cargyll:
            dalt:
            fenn:
            gardener:
            harlton:
            inchfield:
            jast:
            karstark:
            lipps:
            manderly:
            norcross:
            oakheart:
            payne:

    # -----------------------------------
    # Consul
    # -----------------------------------
    consul:
      children:
        consul_server:
          hosts:
            erenford:
            fenn:
            gardener:
        consul_client:
          hosts:
            allyrion:
            bettley:
            cargyll:
            dalt:
            harlton:
            inchfield:
            jast:
            velaryon:
            karstark:
            lipps:
            manderly:
            norcross:
            oakheart:
            payne:

    # -----------------------------------
    # Nomad
    # -----------------------------------
    nomad:
      children:
        nomad_server:
          hosts:
            bettley:
            cargyll:
            dalt:
        nomad_client:
          children:
            nomad_client_gpu:
              hosts:
                velaryon:
          hosts:
            erenford:
            fenn:
            gardener:
            harlton:
            inchfield:
            jast:
            karstark:
            lipps:
            manderly:
            norcross:
            oakheart:
            payne:
            velaryon:

    # -----------------------------------
    # Docker
    # -----------------------------------
    docker:
      hosts:
        allyrion:

    # -----------------------------------
    # Step-CA
    # -----------------------------------
    step_ca:
      hosts:
        jast:

    # -----------------------------------
    # haproxy
    # -----------------------------------
    haproxy:
      hosts:
        allyrion:

    # -----------------------------------
    # NFS Server
    # -----------------------------------
    nfs_server:
      hosts:
        allyrion:
        velaryon:

    # -----------------------------------
    # Prometheus
    # -----------------------------------
    prometheus:
      hosts:
        allyrion:

    # -----------------------------------
    # Vault
    # -----------------------------------
    vault:
      hosts:
        bettley:
        cargyll:
        dalt:

    # -----------------------------------
    # Envoy
    # -----------------------------------
    envoy:
      hosts:
        allyrion:

    # -----------------------------------
    # Grafana
    # -----------------------------------
    grafana:
      hosts:
        gardener:

    # -----------------------------------
    # Loki
    # -----------------------------------
    loki:
      hosts:
        inchfield:

    # -----------------------------------
    # ZFS
    # -----------------------------------
    zfs:
      hosts:
        allyrion:
        erenford:
        gardener:

    # -----------------------------------
    # SeaweedFS - High-performance 1TB NVMe cluster
    # -----------------------------------
    seaweedfs:
      hosts:
        manderly:
        norcross:
        oakheart:
        payne:

    # -----------------------------------
    # Authelia
    # -----------------------------------
    authelia:
      hosts:
        jast:

    # -----------------------------------
    # MCP Server
    # -----------------------------------
    mcp_server:
      hosts:
        allyrion:
        bettley:
        cargyll:
        dalt:
        erenford:
        fenn:
        gardener:
        harlton:
        inchfield:
        jast:
        karstark:
        lipps:
        manderly:
        norcross:
        oakheart:
        payne:
        velaryon:

    # -----------------------------------
    # Distributed LLaMA - Pi-only distributed inference
    # -----------------------------------
    distributed_llama:
      children:
        distributed_llama_root:
          hosts:
            manderly:  # Pi 5 with more RAM for root node
        distributed_llama_worker:
          hosts:
            allyrion:
            bettley:
            cargyll:
            dalt:
            erenford:
            fenn:
            gardener:
            harlton:
            inchfield:
            jast:
            karstark:
            lipps:
            norcross:
            oakheart:
            payne:
